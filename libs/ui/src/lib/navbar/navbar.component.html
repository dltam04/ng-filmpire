<p class="fixed z-10 min-h-[64px] w-[calc(100vw-240px)] max-sm:w-screen">
  <mat-toolbar
    class="bg-[#1976d2] text-white dark:bg-[#272727] w-auto place-content-center"
  >
    <mat-toolbar-row class="justify-between items-center">
      <button
        mat-icon-button
        class="icon menu-icon sm:hidden"
        aria-label="menu icon"
        (click)="toggleMobileSidenav.emit()"
      >
        <mat-icon>menu</mat-icon>
      </button>

      <button
        mat-icon-button
        class="icon brightness-icon"
        aria-label="brightness icon"
        (click)="toggleDarkMode.emit()"
      >
        <mat-icon *ngIf="darkMode; else light">brightness_7</mat-icon>
        <ng-template #light>
          <mat-icon>brightness_4</mat-icon>
        </ng-template>
      </button>

      <form
        [formGroup]="searchForm"
        class="form max-sm:hidden"
        (ngSubmit)="searchMovie()"
      >
        <mat-form-field>
          <mat-icon matPrefix>search</mat-icon>
          <input
            class="text-white caret-white placeholder:text-white"
            type="text"
            formControlName="search"
            matInput
            placeholder="Search for movie or tv show..."
            [matAutocomplete]="auto"
          />
          <button
            *ngIf="searchForm.get('search')?.value"
            class="icon cursor-pointer"
            type="button"
            matSuffix
            mat-icon-button
            aria-label="Clear"
            (click)="resetSearchBar()"
          >
            <mat-icon>close</mat-icon>
          </button>

          <mat-autocomplete
            [hideSingleSelectionIndicator]="true"
            #auto="matAutocomplete"
            class="dark:bg-[#121212]"
          >
            <ng-container *ngIf="searchForm.get('search')?.value">
              <mat-option
                *ngFor="
                  let result of $any((searchValueChanges$ | async)?.results)
                "
              >
                <div class="flex">
                  <div class="mr-2 w-10 h-10">
                    <img
                      alt="{{
                        result?.name ? result.name : result.title
                      }} poster"
                      class="object-cover rounded"
                      [src]="
                        result.poster_path
                          ? 'https://image.tmdb.org/t/p/w500/' +
                            result.poster_path
                          : 'https://image.tmdb.org/t/p/w500/' +
                            result.profile_path
                      "
                    />
                  </div>
                  <span
                    class="w-52 text-ellipsis overflow-hidden dark:text-white"
                    >{{ result?.name ? result.name : result.title }}</span
                  >
                </div>
              </mat-option>
            </ng-container>
          </mat-autocomplete>
        </mat-form-field>
      </form>

      <button mat-button class="icon" aria-label="account icon">
        <p>LOGIN</p>
        <mat-icon>account_circle</mat-icon>
      </button>
    </mat-toolbar-row>

    <mat-toolbar-row class="justify-center items-center mt-5 sm:hidden">
      <form [formGroup]="searchForm" class="form" (ngSubmit)="searchMovie()">
        <mat-form-field>
          <mat-icon matPrefix>search</mat-icon>
          <input
            class="text-white caret-white placeholder:text-white"
            type="text"
            formControlName="search"
            matInput
            placeholder="Search for movie..."
          />
          <button
            *ngIf="searchForm.get('search')?.value"
            class="icon cursor-pointer"
            type="button"
            matSuffix
            mat-icon-button
            aria-label="Clear"
            (click)="resetSearchBar()"
          >
            <mat-icon>close</mat-icon>
          </button>
        </mat-form-field>
      </form>
    </mat-toolbar-row>
  </mat-toolbar>
</p>
