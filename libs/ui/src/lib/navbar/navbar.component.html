<p class="fixed z-10 min-h-[64px] w-[calc(100vw-240px)] max-sm:w-screen">
  <mat-toolbar
    class="bg-[#1976d2] text-white dark:bg-[#272727] w-auto place-content-center"
  >
    <mat-toolbar-row class="justify-between items-center">
      <button
        mat-icon-button
        class="icon menu-icon sm:hidden"
        aria-label="menu icon"
        (click)="toggleMobileSidenav.emit()"
      >
        <mat-icon>menu</mat-icon>
      </button>

      <button
        mat-icon-button
        class="icon brightness-icon"
        aria-label="brightness icon"
        (click)="toggleDarkMode.emit()"
      >
        <mat-icon *ngIf="darkMode; else light">brightness_7</mat-icon>
        <ng-template #light>
          <mat-icon>brightness_4</mat-icon>
        </ng-template>
      </button>

      <form
        [formGroup]="searchForm"
        class="form max-sm:hidden"
        (ngSubmit)="searchMovie()"
      >
        <mat-form-field>
          <mat-icon matPrefix>search</mat-icon>
          <input
            class="text-white caret-white placeholder:text-white"
            type="text"
            formControlName="search"
            matInput
            placeholder="Search for movie, tv show, actor..."
            [matAutocomplete]="auto"
          />
          <button
            *ngIf="searchForm.get('search')?.value"
            class="icon cursor-pointer"
            type="button"
            matSuffix
            mat-icon-button
            aria-label="Clear"
            (click)="resetSearchBar()"
          >
            <mat-icon>close</mat-icon>
          </button>

          <mat-autocomplete
            [hideSingleSelectionIndicator]="true"
            #auto="matAutocomplete"
            class="dark:bg-[#121212]"
            >
            <ng-container *ngIf="searchForm.get('search')?.value">
              <mat-option
              *ngFor="let result of (searchValueChanges$ | async)?.results"
              (onSelectionChange)="navigateToMediaDetails(result)"
              >
                <div class="flex">
                  <ng-container *ngIf="result.media_type === 'movie'">
                    <div class="mr-2 w-10 h-10">
                      <img
                        alt="{{ result.title }} poster"
                        class="object-cover rounded"
                        [src]="
                          result.poster_path
                            ? 'https://image.tmdb.org/t/p/w500/' +
                              result.poster_path
                            : 'assets/media-poster-placeholder.png'
                        "
                      />
                    </div>
                    <div class="flex flex-col">
                      <span
                        class="w-52 whitespace-nowrap text-ellipsis overflow-hidden dark:text-white"
                        >{{ result.title }}</span
                      >
                      <div
                        class="flex flex-nowrap gap-1 items-center text-gray-500 text-sm"
                      >
                        <span>{{ result.media_type | titlecase }}</span>

                        <i
                          *ngIf="result.release_date"
                          class="dot inline-block w-1 h-1 rounded-full mx-1 my-2 bg-gray-500"
                        ></i>

                        <span *ngIf="result.release_date">{{
                          result.release_date | date : 'yyyy'
                        }}</span>

                        <i
                          class="dot inline-block w-1 h-1 rounded-full mx-1 my-2 bg-gray-500"
                        ></i>

                        <div class="flex rating">
                          <svg
                            class="w-4 h-4 text-yellow-300 mr-1"
                            aria-hidden="true"
                            xmlns="http://www.w3.org/2000/svg"
                            fill="currentColor"
                            viewBox="0 0 22 20"
                          >
                            <path
                              d="M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"
                            />
                          </svg>
                          <span>{{
                            result.vote_average | number : '1.1-1'
                          }}</span>
                        </div>
                      </div>
                    </div>
                  </ng-container>

                  <ng-container *ngIf="result.media_type === 'tv'">
                    <div class="mr-2 w-10 h-10">
                      <img
                        alt="{{ result.name }} poster"
                        class="object-cover rounded"
                        [src]="
                          result.poster_path
                            ? 'https://image.tmdb.org/t/p/w500/' +
                              result.poster_path
                            : 'assets/media-poster-placeholder.png'
                        "
                      />
                    </div>

                    <div class="flex flex-col">
                      <span
                        class="w-52 whitespace-nowrap text-ellipsis overflow-hidden dark:text-white"
                        >{{ result.name }}</span
                      >
                      <div
                        class="flex flex-nowrap gap-1 items-center text-gray-500 text-sm"
                      >
                        <span>{{ result.media_type | uppercase }}</span>

                        <i
                          *ngIf="result.first_air_date"
                          class="dot inline-block w-1 h-1 rounded-full mx-1 my-2 bg-gray-500"
                        ></i>

                        <span *ngIf="result.first_air_date">{{
                          result.first_air_date | date : 'yyyy'
                        }}</span>

                        <i
                          class="dot inline-block w-1 h-1 rounded-full mx-1 my-2 bg-gray-500"
                        ></i>

                        <div class="flex rating">
                          <svg
                            class="w-4 h-4 text-yellow-300 mr-1"
                            aria-hidden="true"
                            xmlns="http://www.w3.org/2000/svg"
                            fill="currentColor"
                            viewBox="0 0 22 20"
                          >
                            <path
                              d="M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"
                            />
                          </svg>
                          <span>{{
                            result.vote_average | number : '1.1-1'
                          }}</span>
                        </div>
                      </div>
                    </div>
                  </ng-container>

                  <ng-container *ngIf="result.media_type === 'person'">
                    <div class="mr-2 w-10 h-10">
                      <img
                        alt="{{ result.name }} poster"
                        class="object-cover rounded"
                        [src]="
                          result.profile_path
                            ? 'https://image.tmdb.org/t/p/w500/' +
                              result.profile_path
                            : 'assets/actor_avatar_placeholder.jpg'
                        "
                      />
                    </div>

                    <div class="flex flex-col">
                      <span
                        class="w-52 whitespace-nowrap text-ellipsis overflow-hidden dark:text-white"
                        >{{ result.name }}</span
                      >
                      <div
                        class="flex flex-nowrap gap-1 items-center text-gray-500 text-sm"
                      >
                        <span>{{ result.media_type | titlecase }}</span>

                        <i
                          class="dot inline-block w-1 h-1 rounded-full mx-1 my-2 bg-gray-500"
                        ></i>

                        <div class="flex rating">
                          <svg
                            class="w-4 h-4 text-yellow-300 mr-1"
                            aria-hidden="true"
                            xmlns="http://www.w3.org/2000/svg"
                            fill="currentColor"
                            viewBox="0 0 22 20"
                          >
                            <path
                              d="M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"
                            />
                          </svg>
                          <span>{{
                            result.popularity | number : '1.1-1'
                          }}</span>
                        </div>
                      </div>
                    </div>
                  </ng-container>
                </div>
              </mat-option>
            </ng-container>
          </mat-autocomplete>
        </mat-form-field>
      </form>

      <button mat-button class="icon" aria-label="account icon">
        <p>LOGIN</p>
        <mat-icon>account_circle</mat-icon>
      </button>
    </mat-toolbar-row>

    <mat-toolbar-row class="justify-center items-center mt-5 sm:hidden">
      <form [formGroup]="searchForm" class="form" (ngSubmit)="searchMovie()">
        <mat-form-field>
          <mat-icon matPrefix>search</mat-icon>
          <input
            class="text-white caret-white placeholder:text-white"
            type="text"
            formControlName="search"
            matInput
            placeholder="Search for movie..."
          />
          <button
            *ngIf="searchForm.get('search')?.value"
            class="icon cursor-pointer"
            type="button"
            matSuffix
            mat-icon-button
            aria-label="Clear"
            (click)="resetSearchBar()"
          >
            <mat-icon>close</mat-icon>
          </button>
        </mat-form-field>
      </form>
    </mat-toolbar-row>
  </mat-toolbar>
</p>
